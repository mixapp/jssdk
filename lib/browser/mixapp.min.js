!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Mixapp=e()}}(function(){return function e(t,n,r){function s(i,u){if(!n[i]){if(!t[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=null;"undefined"==typeof XMLHttpRequest&&(i=e("http"));var u=function(){function e(t){r(this,e),this.port=t.port||443,this.host=t.host||"api.mixapp.io",this.headers={},this.token=t.token||"",this.timeout=t.timeout||1e4}return o(e,[{key:"get",value:function(e,t,n){return this._request("get",e,t,n)}},{key:"post",value:function(e,t,n){return this._request("POST",e,t,n)}},{key:"del",value:function(e,t,n){return this._request("DELETE",e,t,n)}},{key:"setToken",value:function(e){this.token=e,this.setHeader("X-Auth-Token",e)}},{key:"setHeader",value:function(e,t){this.headers[e]=t}},{key:"setTimeout",value:function(){}},{key:"_node_request",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3];o=s({},this.headers,o),"post"===e.toLowerCase()&&(o["Content-Type"]="application/json");var u="";if("get"===e.toLowerCase()){var a=[];for(var c in r)a.push(c+"="+r[c]);u=a.join("&")}var l=new Promise(function(s,a){var c=i.request({method:e,port:n.port,path:t+"?"+u,host:n.host,headers:o},function(e){var t="";return 200!==e.statusCode?a({error_code:e.statusCode,error_message:e.responseText||"Invalid statusCode"}):(e.on("data",function(e){t+=e.toString()}),e.on("error",function(t){return a({error_code:e.statusCode,error_message:t.message})}),void e.on("end",function(){return s(t)}))});c.on("aborted",function(){return a({error_code:504,error_message:"Request has been aborted by the server"})}),c.on("abort",function(){return a({error_code:418,error_message:"Request has been aborted by the client"})}),c.on("error",function(e){return a({error_code:422,error_message:e.message})}),c.setTimeout(n.timeout,function(){c.abort()}),"post"===e.toLowerCase()&&c.write(JSON.stringify(r)),c.end()}).then(function(e){return JSON.parse(e)}).then(function(e){return e.error_code?Promise.reject(e):e});return l}},{key:"_ajax",value:function(e,t,n,r){var s=this,o=new Promise(function(o,i){var u="";if("get"===e.toLowerCase()){var a=[];for(var c in n)a.push(c+"="+n[c]);u=a.join("&")}var l="https://"+s.host+":"+s.port+t+"?"+u,p=new XMLHttpRequest;p.timeout=s.timeout,p.open(e,l,!0);for(var f in s.headers)p.setRequestHeader(f,s.headers[f]);for(var h in r)p.setRequestHeader(h,r[h]);"post"===e.toLowerCase()&&p.setRequestHeader("Content-Type","application/json"),p.onreadystatechange=function(){if(4==p.readyState)return 200!=p.status?i({error_code:p.status,error_message:p.responseText||"Invalid statusCode"}):void o(p.responseText)},"post"===e.toLowerCase()?p.send(JSON.stringify(n)):p.send()}).then(function(e){return JSON.parse(e)}).then(function(e){return e.error_code?Promise.reject(e):e});return o}},{key:"_request",value:function(e,t,n,r){return"undefined"!=typeof XMLHttpRequest?this._ajax(e,t,n,r):this._node_request(e,t,n,r)}}]),e}();n["default"]=u},{http:void 0}],2:[function(e,t,n){"use strict";var r=e("./service"),s={Service:r.Service};t.exports=s},{"./service":4}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.Process=function(){function e(t,n,s){r(this,e);for(var o in t)this[o]=t[o];Object.defineProperty(this,"_workspace",{enumerable:!1,value:n}),Object.defineProperty(this,"_client",{enumerable:!1,value:s})}return s(e,[{key:"fetch",value:function(){var e=this;return this._client.get("/v1/workspaces/"+this._workspace+"/processes/"+this.id).then(function(t){for(var n in t.result)e[n]=t.result[n];return e})}},{key:"getContext",value:function(e,t){return this._client.get("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/context",{skip:e,limit:t})}},{key:"getLogs",value:function(e,t){return this._client.get("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/logs",{skip:e,limit:t})}},{key:"update",value:function(e){var t=this;return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id,e).then(function(e){for(var n in e.result)t[n]=e.result[n];return t})}},{key:"remove",value:function(){return this._client.del("/v1/workspaces/"+this._workspace+"/processes/"+this.id)}},{key:"createVariable",value:function(e){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/variables",e).then(function(e){return e.result})}},{key:"updateVariable",value:function(e,t){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/variables/"+e,t).then(function(e){return e.result})}},{key:"removeVariable",value:function(e){return this._client.del("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/variables/"+e)}},{key:"start",value:function(e){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/start",e)}},{key:"stop",value:function(){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/stop",{})}},{key:"createConnector",value:function(e){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors",e).then(function(e){return e.result})}},{key:"updateConnector",value:function(e,t){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors/"+e,t).then(function(e){return e.result})}},{key:"moveConnector",value:function(e,t,n){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors/"+e+"/move",{positionX:t,positionY:n})}},{key:"removeConnector",value:function(e){return this._client.del("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors/"+e,{})}},{key:"setRelation",value:function(e,t){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors/"+e+"/relation/"+t,{})}},{key:"setRelationName",value:function(e,t,n){return this._client.post("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors/"+e+"/relation/"+t+"/"+n,{})}},{key:"unsetRelation",value:function(e,t){return this._client.del("/v1/workspaces/"+this._workspace+"/processes/"+this.id+"/connectors/"+e+"/relation/"+t,{})}}]),e}()},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./client"),u=r(i),a=e("./workspace");n.Service=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),Object.defineProperty(this,"_client",{enumerable:!1,value:new u["default"](n)}),this.workspaces={getList:function(e,n){return t._client.get("/v1/workspaces",{skip:e,limit:n}).then(function(e){return e.items=e.items.map(function(e){return new a.Workspace(e,t._client)}),e})},get:function(e){return t._client.get("/v1/workspaces/"+e).then(function(e){return new a.Workspace(e.result,t._client)})},create:function(e){return t._client.post("/v1/workspaces",e).then(function(e){return new a.Workspace(e.result,t._client)})}}}return o(e,[{key:"get",value:function(){return this._client.get("/v1",null)}},{key:"getPlans",value:function(){return this._client.get("/v1/plans",null).then(function(e){return e.result})}},{key:"getOrders",value:function(e,t){return this._client.get("/v1/orders",{skip:e,limit:t})}},{key:"signIn",value:function(e,t){var n=this;return this._client.post("/v1/signin",{email:e,password:t}).then(function(e){return n._client.setToken(e.token),e})}},{key:"signUp",value:function(e){var t=this;return this._client.post("/v1/signup",e).then(function(e){return t._client.setToken(e.token),e})}},{key:"update",value:function(e){return this._client.post("/v1/update",e)}},{key:"restore",value:function(e){return this._client.post("/v1/repair",{email:e})}},{key:"confirmRestore",value:function(e,t){return this._client.post("/v1/repair/"+e,{password:t})}}]),e}()},{"./client":1,"./workspace":6}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.Storage=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],s=arguments[2];r(this,e);for(var o in t)this[o]=t[o];Object.defineProperty(this,"_ACL",{enumerable:!1,value:[]}),Object.defineProperty(this,"_workspace",{enumerable:!1,value:n}),Object.defineProperty(this,"_client",{enumerable:!1,value:s})}return s(e,[{key:"fetch",value:function(){var e=this;return this._client.get("/v1/workspaces/"+this._workspace+"/storages/"+this.name).then(function(t){for(var n in t.result)e[n]=t.result[n];return e})}},{key:"update",value:function(e){var t=this;return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name,e).then(function(e){for(var n in e.result)t[n]=e.result[n];return t})}},{key:"remove",value:function(){return this._client.del("/v1/workspaces/"+this._workspace+"/storages/"+this.name)}},{key:"getIndexes",value:function(){return this._client.get("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/indexes")}},{key:"createIndex",value:function(e){return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/indexes",e)}},{key:"removeIndex",value:function(e){return e=e.toLowerCase(),this._client.del("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/indexes/"+e)}},{key:"setACL",value:function(e){if(!(e instanceof Array))throw new Error("acl must be an array");this._ACL=e}},{key:"getDocuments",value:function(e){var t={"X-Auth-Keys":this._ACL.join(",")};return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/read",e,t).then(function(e){return e.result})}},{key:"createDocument",value:function(e){var t={"X-Auth-Keys":this._ACL.join(",")};return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/create",e,t).then(function(e){return e.result})}},{key:"updateDocuments",value:function(e){var t={"X-Auth-Keys":this._ACL.join(",")};return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/update",e,t).then(function(e){return e.result})}},{key:"removeDocuments",value:function(e){var t={"X-Auth-Keys":this._ACL.join(",")};return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/delete",e,t).then(function(e){return e.result})}},{key:"countDocuments",value:function(e){var t={"X-Auth-Keys":this._ACL.join(",")};return this._client.post("/v1/workspaces/"+this._workspace+"/storages/"+this.name+"/count",e,t)}}]),e}()},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Workspace=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./storage"),u=e("./process");n.Workspace=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments[1];r(this,e),Object.defineProperty(this,"_client",{enumerable:!1,value:s}),Object.defineProperty(this,"storages",{enumerable:!1,value:{getAll:function(){return t._client.get("/v1/workspaces/"+t.name+"/storages").then(function(e){return e.result.map(function(e){return new i.Storage(e,t.name,t._client)})})},create:function(e){return t._client.post("/v1/workspaces/"+t.name+"/storages",e).then(function(e){return new i.Storage(e.result,t.name,t._client)})},get:function(e){return t._client.get("/v1/workspaces/"+t.name+"/storages/"+e).then(function(e){return new i.Storage(e.result,t.name,t._client)})}}}),Object.defineProperty(this,"processes",{enumerable:!1,value:{search:function(e){return t._client.get("/v1/workspaces/"+t.name+"/processes",e).then(function(e){return{total:e.total,items:e.items.map(function(e){return new u.Process(e,t.name,t._client)})}})},get:function(e){return t._client.get("/v1/workspaces/"+t.name+"/processes/"+e).then(function(e){return new u.Process(e.result,t.name,t._client)})},create:function(e){return t._client.post("/v1/workspaces/"+t.name+"/processes",e).then(function(e){return new u.Process(e.result,t.name,t._client)})}}}),Object.defineProperty(this,"marketplace",{enumerable:!1,value:{getConnectors:function(e,n){return t._client.get("/v1/workspaces/"+t.name+"/marketplace/connectors",{skip:e,limit:n})}}}),this.name=n.name,this.title=n.title,this.plan=n.plan,this.npm=n.npm}return o(e,[{key:"stats",value:function(){return this._client.get("/v1/workspaces/"+this.name+"/statistics")}},{key:"fetch",value:function(){var e=this;return this._client.get("/v1/workspaces/"+this.name).then(function(t){for(var n in t.result)e[n]=t.result[n];return t})}},{key:"getBills",value:function(e,t){return this._client.get("/v1/workspaces/"+this.name+"/billing",{skip:e,limit:t})}},{key:"buyPlan",value:function(e){return this._client.post("/v1/workspaces/"+this.name+"/billing",e).then(function(e){return e.result})}},{key:"getKeys",value:function(){return this._client.get("/v1/workspaces/"+this.name+"/keys")}},{key:"createKey",value:function(e){return this._client.post("/v1/workspaces/"+this.name+"/keys",e)}},{key:"updateKey",value:function(e){return this._client.post("/v1/workspaces/"+this.name+"/keys/"+e,{})}},{key:"removeKey",value:function(e){return this._client.del("/v1/workspaces/"+this.name+"/keys/"+e)}},{key:"update",value:function(e){var t=this;return e=s({name:this.name},e),this._client.post("/v1/workspaces/"+this.name,e).then(function(e){for(var n in e.result)t[n]=e.result[n];return e})}},{key:"remove",value:function(){return this._client.del("/v1/workspaces/"+this.name)}},{key:"getConnectors",value:function(e){return this._client.get("/v1/workspaces/"+this.name+"/connectors",e)}},{key:"uploadConnector",value:function(e){return this._client.post("/v1/workspaces/"+this.name+"/connectors",e)}},{key:"removeConnector",value:function(e){return this._client.del("/v1/workspaces/"+this.name+"/connectors/"+e)}},{key:"getConnector",value:function(e){return this._client.get("/v1/workspaces/"+this.name+"/connectors/"+e,{}).then(function(e){return e.result})}}]),e}()},{"./process":3,"./storage":5}]},{},[2])(2)});